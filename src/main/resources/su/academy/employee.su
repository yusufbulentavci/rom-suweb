--@DEPENDS:.base,testing,.person

--@TABLE uzanti=emp
create table academy.employee(
	h jsonb,
    employee_id serial primary key,
    person_id int references academy.person(person_id) not null
  );
--@END

--@FUNCTION 
create function academy.employee_new(p_person_id int) returns academy.employee as $$
declare
	v_ret academy.employee;
begin
	insert into academy.employee(person_id) 
		values (p_person_id) returning * into v_ret;
	return v_ret;
end;
$$ language 'plpgsql';
--@END


--@FUNCTION 
create function academy.employee_delete(a_id int) returns academy.employee as $$
declare
	v_ret academy.employee;
begin
	delete 
		from academy.employee
		where
			employee_id=a_id
		returning * into v_ret;
	return v_ret;
end;
$$ language 'plpgsql';
--@END

